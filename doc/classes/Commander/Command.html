<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Commander::Command</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Commander::Command 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/commander/command_rb.html">lib/commander/command.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#method-i-action">action</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#method-i-example">example</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#method-c-new">new</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#method-i-option">option</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#method-i-run">run</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#method-i-when_called">when_called</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">CLASS</span> <a href="Command/Options.html">Commander::Command::Options</a></li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>name</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>examples</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>syntax</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>description</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>summary</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>proxy_options</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>options</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="method-c-new">
                    
                    <a name="method-c-new"></a><b>new</b>(name)
                    
                </div>
                
                <div class="description">
                  
<p>Initialize new command with specified <em>name</em>.</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                        
                    </p>
                    <div id="method-c-new_source" class="dyn-source">
                        <pre><span class="ruby-comment"># File lib/commander/command.rb, line 40</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-identifier">name</span>
  <span class="ruby-ivar">@name</span>, <span class="ruby-ivar">@examples</span>, <span class="ruby-ivar">@when_called</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>, [], []
  <span class="ruby-ivar">@options</span>, <span class="ruby-ivar">@proxy_options</span> = [], []
<span class="ruby-keyword">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="method-i-action">
                    
                    <a name="method-i-action"></a><b>action</b>(*args, &amp;block)
                    
                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="method-i-example">
                    
                    <a name="method-i-example"></a><b>example</b>(description, command)
                    
                </div>
                
                <div class="description">
                  
<p>Add a usage example for this command.</p>

<p>Usage examples are later displayed in help documentation created by the
help formatters.</p>

<h3>Examples</h3>

<pre>command :something do |c|
  c.example &quot;Should do something&quot;, &quot;my_command something&quot;
end</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('method-i-example_source')" id="l_method-i-example_source">show</a>
                        
                    </p>
                    <div id="method-i-example_source" class="dyn-source">
                        <pre><span class="ruby-comment"># File lib/commander/command.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">example</span> <span class="ruby-identifier">description</span>, <span class="ruby-identifier">command</span> 
  <span class="ruby-ivar">@examples</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">description</span>, <span class="ruby-identifier">command</span>]
<span class="ruby-keyword">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="method-i-option">
                    
                    <a name="method-i-option"></a><b>option</b>(*args, &amp;block)
                    
                </div>
                
                <div class="description">
                  
<p>Add an option.</p>

<p><a href="Command/Options.html">Options</a> are parsed via OptionParser so
view it for additional usage documentation. A block may optionally be
passed to handle the option, otherwise the <em>options</em> struct seen
below  contains the results of this option. This handles common formats
such as:</p>

<pre>-h, --help          options.help           # =&gt; bool
--[no-]feature      options.feature        # =&gt; bool
--large-switch      options.large_switch   # =&gt; bool
--file FILE         options.file           # =&gt; file passed
--list WORDS        options.list           # =&gt; array
--date [DATE]       options.date           # =&gt; date or nil when optional argument not set</pre>

<h3>Examples</h3>

<pre>command :something do |c|
  c.option '--recursive', 'Do something recursively'
  c.option '--file FILE', 'Specify a file'
  c.option('--info', 'Display info') { puts &quot;handle with block&quot; }
  c.option '--[no-]feature', 'With or without feature'
  c.option '--list FILES', Array, 'List the files specified'

  c.when_called do |args, options|
    do_something_recursively if options.recursive
    do_something_with_file options.file if options.file
  end 
end</pre>

<h3>Help Formatters</h3>

<p>This method also parses the arguments passed in order to determine which
were switches, and which were descriptions for the option which can later
be used within help formatters using option[:switches] and
option[:description].</p>

<h3>Input Parsing</h3>

<p>Since <a href="../Commander.html">Commander</a> utilizes OptionParser you
can pre-parse and evaluate option arguments. Simply require
‘optparse/time’, or ‘optparse/date’, as these objects must respond
to parse.</p>

<pre>c.option '--time TIME', Time
c.option '--date [DATE]', Date</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('method-i-option_source')" id="l_method-i-option_source">show</a>
                        
                    </p>
                    <div id="method-i-option_source" class="dyn-source">
                        <pre><span class="ruby-comment"># File lib/commander/command.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">option</span> *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>
  <span class="ruby-identifier">switches</span>, <span class="ruby-identifier">description</span> = <span class="ruby-constant">Runner</span>.<span class="ruby-identifier">separate_switches_from_description</span> *<span class="ruby-identifier">args</span>
  <span class="ruby-identifier">proc</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">option_proc</span>(<span class="ruby-identifier">switches</span>)
  <span class="ruby-ivar">@options</span> <span class="ruby-operator">&lt;&lt;</span> {
    <span class="ruby-value">:args</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">args</span>,
    <span class="ruby-value">:proc</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">proc</span>,
    <span class="ruby-value">:switches</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">switches</span>,
    <span class="ruby-value">:description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">description</span>,
  }
<span class="ruby-keyword">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="method-i-run">
                    
                    <a name="method-i-run"></a><b>run</b>(*args)
                    
                </div>
                
                <div class="description">
                  
<p>Run the command with <em>args</em>.</p>
<ul><li>
<p>parses options, call option blocks</p>
</li><li>
<p>invokes <a href="Command.html#method-i-when_called">when_called</a> proc</p>
</li></ul>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('method-i-run_source')" id="l_method-i-run_source">show</a>
                        
                    </p>
                    <div id="method-i-run_source" class="dyn-source">
                        <pre><span class="ruby-comment"># File lib/commander/command.rb, line 154</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span> *<span class="ruby-identifier">args</span>
  <span class="ruby-identifier">call</span> <span class="ruby-identifier">parse_options_and_call_procs</span>(*<span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="method-i-when_called">
                    
                    <a name="method-i-when_called"></a><b>when_called</b>(*args, &amp;block)
                    
                </div>
                
                <div class="description">
                  
<p>Handle execution of command. The handler may be a class,  object, or block
(see examples below).</p>

<h3>Examples</h3>

<pre># Simple block handling
c.when_called do |args, options|
   # do something
end 

# Create inst of Something and pass args / options
c.when_called MyLib::Command::Something

# Create inst of Something and use arbitrary method
 c.when_called MyLib::Command::Something, :some_method

# Pass an object to handle callback (requires method symbol)
c.when_called SomeObject, :some_method</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Command.html#method-i-action">action</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('method-i-when_called_source')" id="l_method-i-when_called_source">show</a>
                        
                    </p>
                    <div id="method-i-when_called_source" class="dyn-source">
                        <pre><span class="ruby-comment"># File lib/commander/command.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">when_called</span> *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">'must pass an object, class, or block.'</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block</span>
  <span class="ruby-ivar">@when_called</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">block</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">args</span>
<span class="ruby-keyword">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    